daemonize(){
  while sleep 1s; do 
    set +e
    TTL=3600       # send SIGTERM after 3 hours 
    BOOTTIME=1     # wait 1 second to boot app
    ENGINE=$(which podman || which docker)
    echo starting
    test -z $($ENGINE ps -a --filter=name=$APPNAME| head -n-1) && \
      $ENGINE run -d --rm -p "$PORT:80" --name $APPNAME $APPNAME
    $ENGINE start $APPNAME
    sleep 3h;          # go to sleep after 3 hours
    $ENGINE stop $APPNAME
    echo sleeping on port $PORT
    echo "HTTP/1.1 302 OK\nrefresh:$BOOTTIME;url=/\n\n" | nc -lp $PORT 
  done
}
